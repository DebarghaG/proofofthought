<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Debargha Ganguly" /><link rel="canonical" href="https://debarghaG.github.io/proofofthought/api-reference/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>API Reference - ProofOfThought</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "API Reference";
        var mkdocs_page_input_path = "api-reference.md";
        var mkdocs_page_url = "/proofofthought/api-reference/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> ProofOfThought
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../foreword/">Foreword</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../dsl-specification/">DSL Specification</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">API Reference</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#proofofthought">ProofOfThought</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#constructor">Constructor</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#query">query()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#queryresult">QueryResult</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#evaluationpipeline">EvaluationPipeline</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#constructor_1">Constructor</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#evaluate">evaluate()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#evaluationmetrics">EvaluationMetrics</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#backend">Backend</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#interface-methods">Interface Methods</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#verificationresult">VerificationResult</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#z3programgenerator">Z3ProgramGenerator</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#generate">generate()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#generate_with_feedback">generate_with_feedback()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#utility-azure-config">Utility: Azure Config</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../backends/">Backends</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../examples/">Examples</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../benchmarks/">Benchmarks</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../postprocessors/">Postprocessors</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">ProofOfThought</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">API Reference</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/debarghaG/proofofthought/edit/main/docs/api-reference.md">Edit on debarghaG/proofofthought</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="api-reference">API Reference<a class="headerlink" href="#api-reference" title="Permanent link">&para;</a></h1>
<p>This reference documents the public API for ProofOfThought.</p>
<h2 id="proofofthought">ProofOfThought<a class="headerlink" href="#proofofthought" title="Permanent link">&para;</a></h2>
<p>The main entry point for the reasoning system.</p>
<p><strong>Location:</strong> <code>z3adapter.reasoning.proof_of_thought.ProofOfThought</code></p>
<h3 id="constructor">Constructor<a class="headerlink" href="#constructor" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">llm_client</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">model</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;gpt-5&quot;</span><span class="p">,</span>
    <span class="n">backend</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="s2">&quot;smt2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;smt2&quot;</span><span class="p">,</span>
    <span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">verify_timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="n">optimize_timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100000</span><span class="p">,</span>
    <span class="n">cache_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">z3_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;z3&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<ul>
<li><code>llm_client</code>: OpenAI/AzureOpenAI client instance</li>
<li><code>model</code>: Deployment/model name (default: <code>"gpt-5"</code>)</li>
<li><code>backend</code>: <code>"json"</code> or <code>"smt2"</code> (default: <code>"smt2"</code>)</li>
<li><code>max_attempts</code>: Retry limit for generation (default: <code>3</code>)</li>
<li><code>verify_timeout</code>: Z3 timeout in milliseconds (default: <code>10000</code>)</li>
<li><code>optimize_timeout</code>: Optimization timeout in ms, JSON only (default: <code>100000</code>)</li>
<li><code>cache_dir</code>: Program cache directory (default: <code>tempfile.gettempdir()</code>)</li>
<li><code>z3_path</code>: Z3 executable path for SMT2 (default: <code>"z3"</code>)</li>
</ul>
<h3 id="query">query()<a class="headerlink" href="#query" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">query</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="n">max_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16384</span><span class="p">,</span>
    <span class="n">save_program</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">program_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QueryResult</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<ul>
<li><code>question</code>: Natural language question</li>
<li><code>temperature</code>: LLM temperature (default: <code>0.1</code>, ignored for GPT-5 which only supports <code>1.0</code>)</li>
<li><code>max_tokens</code>: Max completion tokens (default: <code>16384</code>)</li>
<li><code>save_program</code>: Save generated program to disk (default: <code>False</code>)</li>
<li><code>program_path</code>: Custom save path (default: auto-generated in <code>cache_dir</code>)</li>
</ul>
<p><strong>Returns:</strong> <code>QueryResult</code></p>
<p><strong>Implementation details:</strong></p>
<p>The method implements a retry loop with error feedback:</p>
<div class="codehilite"><pre><span></span><code><span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_attempts</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">attempt</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">gen_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">question</span><span class="p">,</span> <span class="n">temperature</span><span class="p">,</span> <span class="n">max_tokens</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">gen_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">generate_with_feedback</span><span class="p">(</span>
            <span class="n">question</span><span class="p">,</span> <span class="n">error_trace</span><span class="p">,</span> <span class="n">previous_response</span><span class="p">,</span> <span class="n">temperature</span><span class="p">,</span> <span class="n">max_tokens</span>
        <span class="p">)</span>
    <span class="c1"># ... execute and check result</span>
</code></pre></div>

<h2 id="queryresult">QueryResult<a class="headerlink" href="#queryresult" title="Permanent link">&para;</a></h2>
<p>Contains the results of a reasoning query.</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">QueryResult</span><span class="p">:</span>
    <span class="n">question</span><span class="p">:</span> <span class="nb">str</span>                        <span class="c1"># Input question</span>
    <span class="n">answer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span>                  <span class="c1"># True (SAT), False (UNSAT), None (ambiguous/error)</span>
    <span class="n">json_program</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>  <span class="c1"># Generated program if JSON backend</span>
    <span class="n">sat_count</span><span class="p">:</span> <span class="nb">int</span>                       <span class="c1"># SAT occurrences in output</span>
    <span class="n">unsat_count</span><span class="p">:</span> <span class="nb">int</span>                     <span class="c1"># UNSAT occurrences</span>
    <span class="n">output</span><span class="p">:</span> <span class="nb">str</span>                          <span class="c1"># Raw Z3 output</span>
    <span class="n">success</span><span class="p">:</span> <span class="nb">bool</span>                        <span class="c1"># Execution completed</span>
    <span class="n">num_attempts</span><span class="p">:</span> <span class="nb">int</span>                    <span class="c1"># Generation attempts used</span>
    <span class="n">error</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>                    <span class="c1"># Error message if failed</span>
</code></pre></div>

<h2 id="evaluationpipeline">EvaluationPipeline<a class="headerlink" href="#evaluationpipeline" title="Permanent link">&para;</a></h2>
<p>Facilitates batch evaluation of reasoning questions on datasets.</p>
<p><strong>Location:</strong> <code>z3adapter.reasoning.evaluation.EvaluationPipeline</code></p>
<h3 id="constructor_1">Constructor<a class="headerlink" href="#constructor_1" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proof_of_thought</span><span class="p">:</span> <span class="n">ProofOfThought</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;evaluation_results&quot;</span><span class="p">,</span>
    <span class="n">num_workers</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<ul>
<li><code>proof_of_thought</code>: Configured ProofOfThought instance</li>
<li><code>output_dir</code>: Results directory (default: <code>"evaluation_results"</code>)</li>
<li><code>num_workers</code>: Parallel workers (default: <code>1</code>, uses <code>ThreadPoolExecutor</code> if <code>&gt; 1</code>)</li>
</ul>
<h3 id="evaluate">evaluate()<a class="headerlink" href="#evaluate" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">evaluate</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">dataset</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">question_field</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;question&quot;</span><span class="p">,</span>
    <span class="n">answer_field</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;answer&quot;</span><span class="p">,</span>
    <span class="n">id_field</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_samples</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">skip_existing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EvaluationResult</span>
</code></pre></div>

<p><strong>Parameters:</strong></p>
<ul>
<li><code>dataset</code>: JSON file path or list of dicts</li>
<li><code>question_field</code>: Field name for question text (default: <code>"question"</code>)</li>
<li><code>answer_field</code>: Field name for ground truth (default: <code>"answer"</code>)</li>
<li><code>id_field</code>: Field for sample ID (default: <code>None</code>, auto-generates <code>sample_{idx}</code>)</li>
<li><code>max_samples</code>: Limit samples (default: <code>None</code>, all)</li>
<li><code>skip_existing</code>: Skip cached results (default: <code>True</code>)</li>
</ul>
<p><strong>Returns:</strong> <code>EvaluationResult</code></p>
<p><strong>Caching behavior:</strong></p>
<p>Results are cached by saving <code>{sample_id}_result.json</code> and <code>{sample_id}_program{ext}</code> files to <code>output_dir</code>.</p>
<h2 id="evaluationmetrics">EvaluationMetrics<a class="headerlink" href="#evaluationmetrics" title="Permanent link">&para;</a></h2>
<p>Provides comprehensive metrics for evaluation results.</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">EvaluationMetrics</span><span class="p">:</span>
    <span class="n">accuracy</span><span class="p">:</span> <span class="nb">float</span>                <span class="c1"># sklearn.metrics.accuracy_score</span>
    <span class="n">precision</span><span class="p">:</span> <span class="nb">float</span>               <span class="c1"># sklearn.metrics.precision_score (zero_division=0)</span>
    <span class="n">recall</span><span class="p">:</span> <span class="nb">float</span>                  <span class="c1"># sklearn.metrics.recall_score (zero_division=0)</span>
    <span class="n">f1_score</span><span class="p">:</span> <span class="nb">float</span>                <span class="c1"># 2 * (P * R) / (P + R)</span>
    <span class="n">specificity</span><span class="p">:</span> <span class="nb">float</span>             <span class="c1"># TN / (TN + FP)</span>
    <span class="n">false_positive_rate</span><span class="p">:</span> <span class="nb">float</span>     <span class="c1"># FP / (FP + TN)</span>
    <span class="n">false_negative_rate</span><span class="p">:</span> <span class="nb">float</span>     <span class="c1"># FN / (FN + TP)</span>
    <span class="n">tp</span><span class="p">:</span> <span class="nb">int</span>                        <span class="c1"># True positives</span>
    <span class="n">fp</span><span class="p">:</span> <span class="nb">int</span>                        <span class="c1"># False positives</span>
    <span class="n">tn</span><span class="p">:</span> <span class="nb">int</span>                        <span class="c1"># True negatives</span>
    <span class="n">fn</span><span class="p">:</span> <span class="nb">int</span>                        <span class="c1"># False negatives</span>
    <span class="n">total_samples</span><span class="p">:</span> <span class="nb">int</span>             <span class="c1"># Correct + wrong + failed</span>
    <span class="n">correct_answers</span><span class="p">:</span> <span class="nb">int</span>           <span class="c1"># answer == ground_truth</span>
    <span class="n">wrong_answers</span><span class="p">:</span> <span class="nb">int</span>             <span class="c1"># answer != ground_truth</span>
    <span class="n">failed_answers</span><span class="p">:</span> <span class="nb">int</span>            <span class="c1"># success == False</span>
</code></pre></div>

<p>Metrics are computed using <code>sklearn.metrics.confusion_matrix</code> for binary classification.</p>
<h2 id="backend">Backend<a class="headerlink" href="#backend" title="Permanent link">&para;</a></h2>
<p>Defines the abstract interface for execution backends.</p>
<p><strong>Location:</strong> <code>z3adapter.backends.abstract.Backend</code></p>
<h3 id="interface-methods">Interface Methods<a class="headerlink" href="#interface-methods" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Backend</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">program_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">VerificationResult</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_file_extension</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_prompt_template</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">determine_answer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sat_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">unsat_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">sat_count</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">unsat_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">unsat_count</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">sat_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>

<p>Concrete implementations are provided by <code>SMT2Backend</code> and <code>JSONBackend</code>.</p>
<h2 id="verificationresult">VerificationResult<a class="headerlink" href="#verificationresult" title="Permanent link">&para;</a></h2>
<p>Encapsulates the results of Z3 verification execution.</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">VerificationResult</span><span class="p">:</span>
    <span class="n">answer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span>  <span class="c1"># True (SAT), False (UNSAT), None (ambiguous/error)</span>
    <span class="n">sat_count</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">unsat_count</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">output</span><span class="p">:</span> <span class="nb">str</span>          <span class="c1"># Raw execution output</span>
    <span class="n">success</span><span class="p">:</span> <span class="nb">bool</span>        <span class="c1"># Execution completed without exception</span>
    <span class="n">error</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>    <span class="c1"># Error message if failed</span>
</code></pre></div>

<h2 id="z3programgenerator">Z3ProgramGenerator<a class="headerlink" href="#z3programgenerator" title="Permanent link">&para;</a></h2>
<p>Handles LLM-based program generation with error recovery.</p>
<p><strong>Location:</strong> <code>z3adapter.reasoning.program_generator.Z3ProgramGenerator</code></p>
<h3 id="generate">generate()<a class="headerlink" href="#generate" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="n">max_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16384</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GenerationResult</span>
</code></pre></div>

<p><strong>LLM API Call:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm_client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
    <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">}],</span>
    <span class="n">max_completion_tokens</span><span class="o">=</span><span class="n">max_tokens</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

<p>Note that the <code>temperature</code> parameter is not passed to the API due to GPT-5 constraints.</p>
<h3 id="generate_with_feedback">generate_with_feedback()<a class="headerlink" href="#generate_with_feedback" title="Permanent link">&para;</a></h3>
<p>Enables multi-turn conversation with error feedback:</p>
<div class="codehilite"><pre><span></span><code><span class="n">messages</span><span class="o">=</span><span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">previous_response</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">feedback_message</span><span class="p">},</span>
<span class="p">]</span>
</code></pre></div>

<h2 id="utility-azure-config">Utility: Azure Config<a class="headerlink" href="#utility-azure-config" title="Permanent link">&para;</a></h2>
<p>Provides convenient configuration for Azure OpenAI deployments.</p>
<p><strong>Location:</strong> <code>utils.azure_config.get_client_config()</code></p>
<p><strong>Returns:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
    <span class="s2">&quot;llm_client&quot;</span><span class="p">:</span> <span class="n">AzureOpenAI</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
    <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># Deployment name from env</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Required environment variables:</strong></p>
<ul>
<li><code>AZURE_OPENAI_API_KEY</code></li>
<li><code>AZURE_OPENAI_ENDPOINT</code></li>
<li><code>AZURE_OPENAI_API_VERSION</code></li>
<li><code>AZURE_GPT5_DEPLOYMENT_NAME</code> or <code>AZURE_GPT4O_DEPLOYMENT_NAME</code></li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../dsl-specification/" class="btn btn-neutral float-left" title="DSL Specification"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../backends/" class="btn btn-neutral float-right" title="Backends">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2025 Debargha Ganguly</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/debarghaG/proofofthought" class="fa fa-code-fork" style="color: #fcfcfc"> debarghaG/proofofthought</a>
        </span>
    
    
      <span><a href="../dsl-specification/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../backends/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
